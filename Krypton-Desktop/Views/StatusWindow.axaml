<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:Krypton_Desktop.ViewModels"
        xmlns:i="https://github.com/projektanker/icons.avalonia"
        mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="450"
        x:Class="Krypton_Desktop.Views.StatusWindow"
        x:DataType="vm:StatusViewModel"
        Title="Krypton Status"
        Width="400" Height="450"
        WindowStartupLocation="CenterScreen"
        CanResize="False"
        Background="#1E1E1E">

    <Window.Styles>
        <Style Selector="TextBlock.header">
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,16,0,8"/>
        </Style>
        <Style Selector="TextBlock.label">
            <Setter Property="Foreground" Value="#888888"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>
        <Style Selector="TextBlock.value">
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto">
        <!-- Header -->
        <Border Grid.Row="0" Padding="20,16" Background="#252525">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <i:Icon Value="mdi-information" FontSize="24" Foreground="#0078D4"/>
                    <TextBlock Text="Status"
                               Foreground="#FFFFFF"
                               FontSize="20"
                               FontWeight="Bold"
                               VerticalAlignment="Center"
                               Margin="12,0,0,0"/>
                </StackPanel>

                <!-- Connection status indicator -->
                <Border Grid.Column="2"
                        CornerRadius="12"
                        Padding="12,6"
                        Background="{Binding StatusColor}">
                    <TextBlock Text="{Binding ConnectionStatus}"
                               Foreground="#FFFFFF"
                               FontSize="12"
                               FontWeight="SemiBold"/>
                </Border>
            </Grid>
        </Border>

        <!-- Content -->
        <ScrollViewer Grid.Row="1" Padding="20,0">
            <StackPanel>
                <!-- Connection Section -->
                <TextBlock Classes="header" Text="Connection"/>
                <Border Background="#2D2D2D" CornerRadius="8" Padding="16" Margin="0,0,0,8">
                    <StackPanel>
                        <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto" Margin="0,0,0,0">
                            <TextBlock Grid.Row="0" Grid.Column="0" Classes="label" Text="Server:" Margin="0,0,16,8"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" Classes="value" Text="{Binding ServerAddress}"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Classes="label" Text="User:" Margin="0,0,16,8"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" Classes="value" Text="{Binding AuthenticatedUser}"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Classes="label" Text="Last Sync:" Margin="0,0,16,0"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" Classes="value" Text="{Binding LastSyncTime}"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Clipboard Monitoring Section -->
                <TextBlock Classes="header" Text="Clipboard Monitoring"/>
                <Border Background="#2D2D2D" CornerRadius="8" Padding="16" Margin="0,0,0,8">
                    <Grid ColumnDefinitions="Auto,*">
                        <TextBlock Grid.Column="0" Classes="label" Text="Mode:" Margin="0,0,16,0"/>
                        <TextBlock Grid.Column="1" Classes="value" Text="{Binding ClipboardMonitoringMode}"/>
                    </Grid>
                </Border>

                <!-- Offline Queue Section -->
                <TextBlock Classes="header" Text="Sync Status"/>
                <Border Background="#2D2D2D" CornerRadius="8" Padding="16" Margin="0,0,0,8">
                    <StackPanel>
                        <Grid ColumnDefinitions="Auto,*">
                            <TextBlock Grid.Column="0" Classes="label" Text="Pending Items:" Margin="0,0,16,0"/>
                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <TextBlock Classes="value" Text="{Binding OfflineQueueCount}"/>
                                <i:Icon Value="mdi-cloud-upload"
                                        FontSize="14"
                                        Foreground="#FFC107"
                                        Margin="8,0,0,0"
                                        IsVisible="{Binding HasOfflineQueue}"/>
                            </StackPanel>
                        </Grid>
                        <TextBlock Text="Items waiting to be synced when connection is restored"
                                   Foreground="#666666"
                                   FontSize="11"
                                   Margin="0,8,0,0"
                                   IsVisible="{Binding HasOfflineQueue}"/>
                    </StackPanel>
                </Border>

                <!-- App Info Section -->
                <TextBlock Classes="header" Text="Application"/>
                <Border Background="#2D2D2D" CornerRadius="8" Padding="16" Margin="0,0,0,16">
                    <Grid ColumnDefinitions="Auto,*">
                        <TextBlock Grid.Column="0" Classes="label" Text="Version:" Margin="0,0,16,0"/>
                        <TextBlock Grid.Column="1" Classes="value" Text="{Binding AppVersion}"/>
                    </Grid>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Footer -->
        <Border Grid.Row="2" Padding="20,12" Background="#252525">
            <Button Command="{Binding CloseCommand}"
                    Content="Close"
                    Background="#3D3D3D"
                    Foreground="#FFFFFF"
                    BorderThickness="0"
                    Padding="16,8"
                    CornerRadius="4"
                    HorizontalAlignment="Right"/>
        </Border>
    </Grid>
</Window>
